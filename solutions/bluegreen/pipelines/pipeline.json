{
    "name": "bluegreen",
    "description": "blue green pipeline",
    "keepWaitingPipelines": false,
    "parameterConfig":
    [
        {
            "default": "v1",
            "hasOptions": false,
            "label": "helloworld image tag",
            "name": "hellotag",
            "options":
            [
                {
                    "value": ""
                }
            ],
            "required": true
        }
    ],
    "stages":
    [
        {
        	"moniker": {
        		"app": "codelabs-bluegreen-v2"
      		},
            "account": "my-k8s-account",
            "cloudProvider": "kubernetes",
            "manifestArtifactAccount": "embedded-artifact",
            "manifests":
            [
                {
                    "apiVersion": "apps/v1",
                    "kind": "ReplicaSet",
                    "metadata":
                    {
                        "annotations":
                        {
                            "strategy.spinnaker.io/max-version-history": "2",
                            "traffic.spinnaker.io/load-balancers": "[\"service hellosvc\"]"
                        },
                        "labels":
                        {
                            "tier": "helloworld"
                        },
                        "name": "helloworld",
                        "namespace": "default"
                    },
                    "spec":
                    {
                        "replicas": 3,
                        "selector":
                        {
                            "matchLabels":
                            {
                                "tier": "helloworld"
                            }
                        },
                        "template":
                        {
                            "metadata":
                            {
                                "labels":
                                {
                                    "tier": "helloworld"
                                }
                            },
                            "spec":
                            {
                                "containers":
                                [
                                    {
                                        "image": "us-docker.pkg.dev/spinnaker-community/codelabs/helloworld:${ parameters.hellotag }",
                                        "imagePullPolicy": "IfNotPresent",
                                        "name": "helloworld",
                                        "ports":
                                        [
                                            {
                                                "containerPort": 6000
                                            }
                                        ]
                                    }
                                ]
                            }
                        }
                    }
                }
            ],
            "name": "Deploy (Manifest)",
            "refId": "1",
            "requisiteStageRefIds":
            [],
            "source": "text",
            "type": "deployManifest"
        },
        {
            "account": "my-k8s-account",
			"app": "codelabs-bluegreen-v2",
            "cloudProvider": "kubernetes",
            "cluster": "replicaSet helloworld",
            "criteria": "second_newest",
            "kind": "replicaSet",
            "location": "default",
            "manifestName": " ",
            "mode": "dynamic",
            "name": "Disable (Manifest)",
            "refId": "2",
            "requisiteStageRefIds":
            [
                "1"
            ],
            "type": "disableManifest"
        },
        {
            "account": "my-k8s-account",
			"app": "codelabs-bluegreen-v2",
            "cloudProvider": "kubernetes",
            "cluster": "replicaSet helloworld",
            "criteria": "second_newest",
            "kind": "replicaSet",
            "location": "default",
            "manifestName": " ",
            "mode": "dynamic",
            "name": "Scale (Manifest)",
            "refId": "3",
            "replicas": 1,
            "requisiteStageRefIds":
            [
                "2"
            ],
            "type": "scaleManifest"
        }
    ],
    "triggers":
    []
}